@page
@model SportsAIModel
@{
    ViewData["Title"] = "Sports AI";
}

<meta name="viewport" content="width=device-width" initial-scale="1.0">
<link rel="stylesheet" href="~/css/style.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/sportsAI.css" asp-append-version="true" />
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/html/styles.css">
<script src="~/js/sportsAI.js" asp-append-version="true"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<head>
  <title>Sport Scores AI</title>
</head>
<body style="background-color: beige;">

<header class=" w3-container w3-red w3-center" style="height: 25%; padding-top: 40px;">
        <h1 class="w3-margin mobileHeader"
          style="color: white; font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; font-size:64px">Sport Scores AI</h1>
        <h2 class="w3-margin w3-large" style="color: white; font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif">-- Only Functional On Localhost Currently --</h2>
        </header>
	<div class="AIContainer" style="width: 100vw;height: 75vh; display:inline-block">

   <div class="chatbox" id="chatbox"></div>
   <div class="formContainer">
    <form id="message-form" style="height: 100%;">
      <input class="textinput" type="text" id="message-input" placeholder="Type your message...">
      <button class="submitBtn" type="submit">Send</button>
    </form>
    </div>
    </div>
</body>

<script>
  const chatbox = document.getElementById('chatbox');
const messageForm = document.getElementById('message-form');
const messageInput = document.getElementById('message-input');

const appendMessage = (message, sender) => {
  const messageElement = document.createElement('div');
  messageElement.classList.add('message');
  messageElement.classList.add(sender);
  messageElement.textContent = message;
  chatbox.appendChild(messageElement);
};

messageForm.addEventListener('submit', async (event) => {
  event.preventDefault();
  const message = messageInput.value.trim();
  messageInput.value = '';
  appendMessage(`You: ${message}`, 'user');
  const response = await sendMessage(message);
  appendMessage(`OpenAI: ${response}`, 'chatbot');
  chatbox.scrollTop = chatbox.scrollHeight;
});
</script>